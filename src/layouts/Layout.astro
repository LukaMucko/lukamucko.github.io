<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Luka Mucko</title>
		<meta
			name="description"
			content="Personal site, notes, and experiments by Luka Mucko."
		/>
		<meta property="og:title" content="Luka Mucko" />
		<meta
			property="og:description"
			content="Personal site, notes, and experiments by Luka Mucko."
		/>
		<meta property="og:type" content="website" />
		<meta name="twitter:card" content="summary" />
		<meta name="twitter:title" content="Luka Mucko" />
		<meta
			name="twitter:description"
			content="Personal site, notes, and experiments by Luka Mucko."
		/>

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&display=swap"
			rel="stylesheet"
		/>

		<script is:inline>
			const params = new URLSearchParams(window.location.search);
			const requestedTheme = params.get("theme");
			const savedAccent = localStorage.getItem("accent-theme");

			if (requestedTheme) {
				document.documentElement.dataset.theme = requestedTheme;
				localStorage.setItem("accent-theme", requestedTheme);
			} else if (savedAccent) {
				document.documentElement.dataset.theme = savedAccent;
			}

			const savedTheme = localStorage.getItem("theme");
			if (savedTheme === "light") {
				document.documentElement.classList.remove("dark");
			} else {
				// Default to dark when no preference is saved
				document.documentElement.classList.add("dark");
			}
		</script>
	</head>
	<body>
		<slot />
	</body>
</html>

<style is:global>
	:root {
		--page-width: 1200px;
		--bg-color: #1b211a;
		--text-color: #ebd5ab;
		--shadow-color: #628141;
		--accent-color: #8bae66;
		--code-bg: #101510;
		--code-border: #628141;
		--code-shadow: #8bae66;
		--code-keyword: #8bae66;
		--code-string: #ebd5ab;
		--code-number: #c7d18b;
		--code-func: #8bae66;
		--code-comment: #7a8964;
		--code-operator: #ebd5ab;
		--code-constant: #8bae66;
		--code-type: #ebd5ab;
		--shiki-foreground: var(--text-color);
		--shiki-background: var(--code-bg);
		--shiki-color-text: var(--text-color);
		--shiki-color-background: var(--code-bg);
		--shiki-token-constant: var(--code-constant);
		--shiki-token-string: var(--code-string);
		--shiki-token-comment: var(--code-comment);
		--shiki-token-keyword: var(--code-keyword);
		--shiki-token-parameter: var(--text-color);
		--shiki-token-function: var(--code-func);
		--shiki-token-string-expression: var(--code-string);
		--shiki-token-punctuation: var(--code-operator);
		--shiki-token-link: var(--accent-color);

		--astro-code-color-text: var(--text-color);
		--astro-code-color-background: var(--code-bg);
		--astro-code-foreground: var(--text-color);
		--astro-code-background: var(--code-bg);
		--astro-code-token-constant: var(--code-constant);
		--astro-code-token-string: var(--code-string);
		--astro-code-token-comment: var(--code-comment);
		--astro-code-token-keyword: var(--code-keyword);
		--astro-code-token-parameter: var(--text-color);
		--astro-code-token-function: var(--code-func);
		--astro-code-token-string-expression: var(--code-string);
		--astro-code-token-punctuation: var(--code-operator);
		--astro-code-token-link: var(--accent-color);
	}

	html.dark {
		--bg-color: #1b211a;
		--text-color: #ebd5ab;
		--shadow-color: #628141;
		--accent-color: #8bae66;
	}

	html[data-theme="pthalo"] {
		--accent-color: #123524;
	}

	html {
		height: 100%;
		width: 100%;
	}

	body {
		background-color: var(--bg-color);
		color: var(--text-color);
		font-family: "Courier New", Courier, monospace;
		transition:
			background-color 0.3s,
			color 0.3s;
		margin: 0;
		padding: 0;
		min-height: 100%;
		width: 100%;
		overflow-x: hidden;
	}

	/* Global Code Styles */
	:global(code),
	:global(pre) {
		font-family: "Fira Code", monospace !important;
	}
	:global(pre) {
		padding: 1rem 1.2rem;
		border: 1px solid var(--code-border);
		box-shadow: 6px 6px 0px var(--code-shadow);
		background-color: var(--code-bg) !important;
		overflow-x: auto;
	}
	:global(code) {
		background-color: #141a13 !important;
		color: var(--text-color) !important;
		padding: 0.1rem 0.25rem;
		border-radius: 2px;
	}
	:global(.astro-code span) {
		color: var(--text-color) !important;
		background-color: transparent !important;
	}
	:global(.astro-code span.token.keyword),
	:global(.astro-code span.token.function),
	:global(.astro-code span.token.string),
	:global(.astro-code span.token.number) {
		color: var(--code-keyword) !important;
	}
	:global(.astro-code span.token.comment) {
		color: var(--code-comment) !important;
	}
	:global(.astro-code span.token.operator),
	:global(.astro-code span.token.punctuation) {
		color: var(--code-operator) !important;
	}
	:global(.astro-code span.token.constant),
	:global(.astro-code span.token.builtin),
	:global(.astro-code span.token.boolean) {
		color: var(--code-constant) !important;
	}
	:global(.astro-code span.token.class-name),
	:global(.astro-code span.token.type) {
		color: var(--code-type) !important;
		text-decoration: underline;
		text-decoration-color: #628141;
		text-underline-offset: 3px;
	}
	:global(.astro-code span.token.string) {
		color: var(--code-string) !important;
	}
	:global(.astro-code span.token.function),
	:global(.astro-code span.token.method),
	:global(.astro-code span.token.property) {
		color: var(--code-func) !important;
	}
	:global(math) {
		display: none !important;
	}
	:global(.katex-display) {
		overflow-x: auto;
		overflow-y: hidden;
		max-width: 100%;
	}
	:global(.katex .stretchy svg),
	:global(.katex svg[width$="em"]) {
		display: none !important;
	}
	:global(.katex .pstrut),
	:global(.katex .hide-tail) {
		display: none !important;
	}
	:global(.katex-display > .katex) {
		white-space: normal;
	}

	.btn {
		font-family: "Courier New", Courier, monospace;
		background: var(--bg-color);
		border: 2px solid var(--text-color);
		padding: 0.8rem 2rem;
		font-size: 1.5rem;
		font-weight: bold;
		cursor: pointer;
		--btn-shadow: 4px;
		--btn-shadow-hover: 6px;
		--btn-shadow-active: 2px;
		box-shadow: var(--btn-shadow) var(--btn-shadow) 0px
			var(--shadow-color);
		text-decoration: none;
		color: inherit;
		display: inline-block;
		position: relative;
		z-index: 1;
		transition:
			transform 0.1s,
			box-shadow 0.1s;
	}
	html.dark .btn {
		box-shadow: var(--btn-shadow) var(--btn-shadow) 0px
			var(--accent-color);
	}
	.btn:active {
		transform: translate(2px, 2px);
		box-shadow: var(--btn-shadow-active) var(--btn-shadow-active) 0px
			var(--shadow-color);
	}
	html.dark .btn:active {
		box-shadow: var(--btn-shadow-active) var(--btn-shadow-active) 0px
			var(--accent-color);
	}
	.btn:hover {
		transform: translate(-2px, -2px);
		box-shadow: var(--btn-shadow-hover) var(--btn-shadow-hover) 0px
			var(--shadow-color);
	}
	html.dark .btn:hover {
		box-shadow: var(--btn-shadow-hover) var(--btn-shadow-hover) 0px
			var(--accent-color);
	}


	a:focus-visible,
	button:focus-visible {
		outline: 2px dashed var(--accent-color);
		outline-offset: 4px;
	}

	a:hover {
		color: inherit;
	}

	.page-main {
		padding: 4rem;
		max-width: var(--page-width);
		width: min(100%, var(--page-width));
		margin: 0 auto;
		position: relative;
		min-height: 100vh;
		box-sizing: border-box;
	}

	@media (max-width: 768px) {
		.page-main {
			padding: 2rem;
		}
	}
</style>
